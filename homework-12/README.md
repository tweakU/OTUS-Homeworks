## Домашнее задание № 12 — «Управление процессами»

Цель домашнего задания: работать с процессами в операционной системе (ОС) GNU/Linux.

Выполнение домашнего задания:

**1. Написать свою реализацию ps ax используя анализ /proc.**  
Для этого можно использовать команды cat, awk и ls. В /proc у нас есть директории,
которые соответствуют идентификаторам процессов (PID), а внутри каждого из них есть файл stat,
который содержит информацию о процессе.

```console
#!/bin/bash

# Заголовок
echo -e "PID\tSTATE\tCOMMAND"

# Проходим по всем папкам в /proc
for pid in /proc/[0-9]*; do

# Проверяем, существует ли файл stat
    if [ -f "$pid/stat" ]; then

# Читаем данные из stat
        stat_info=$(cat "$pid/stat")

# Извлекаем PID, состояние (state), команду (command)
        pid_value=$(echo "$stat_info" | awk '{print $1}')
        state=$(echo "$stat_info" | awk '{print $3}')
        command=$(echo "$stat_info" | awk '{print $2}')

# Выводим результат
        echo -e "$pid_value\t$state\t$command"
    fi
done
```

Мы перебираем все директории в /proc, которые представляют собой процессы (они начинаются с цифры).
Для каждого процесса проверяем, существует ли файл stat.
Извлекаем PID, состояние процесса и имя команды из файла stat.
Выводим информацию в удобном формате.




**2. Написать свою реализацию lsof.**  
Для этого мы будем читать директории /proc/[PID]/fd, в которых находятся символьные ссылки на открытые файлы процесса.  
Каждая ссылка указывает на файл, который открыт процессом.

```console
#!/bin/bash

# Заголовок
echo -e "PID\tFD\tFILE"

# Проходим по всем папкам в /proc
for pid in /proc/[0-9]*; do

# Проверяем, существует ли директория fd
    if [ -d "$pid/fd" ]; then

# Проходим по всем файлам в fd
        for fd in $pid/fd/*; do

# Проверяем, что это символьная ссылка
            if [ -L "$fd" ]; then

# Получаем путь к открытому файлу
                file=$(readlink "$fd")

# Выводим PID, FD и путь к файлу
                echo -e "$(basename $pid)\t$(basename $fd)\t$file"
            fi
        done
    fi
done
```

Мы перебираем все директории в /proc, которые соответствуют процессам.
В каждой директории проверяем наличие каталога fd, в котором находятся ссылки на открытые файлы.
Читаем каждую ссылку с помощью readlink, чтобы узнать, какой файл открыт процессом.
Выводим PID процесса, номер дескриптора файла (FD) и путь к открытому файлу.
